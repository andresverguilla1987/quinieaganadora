<!doctype html><html lang="es"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Quiniela PRO — Fix</title><link rel="stylesheet" href="styles.css"></head><body><header class="top"><h1>Quiniela PRO — Fix</h1><p class="sub">Frontend placeholder — ajusta API_BASE en el script.</p></header><main class="wrap"><div class="controls"><button id="refresh">Actualizar partidos</button><button id="gen">Generar picks</button></div><section class="card"><h2>Picks</h2><pre id="picks">Sin datos — presiona Generar picks</pre></section><section class="card"><h2>Partidos</h2><ul id="matches"><li>Cargando partidos…</li></ul></section><footer class="foot">Edita API_BASE en el script para apuntar a tu backend.</footer></main><script>const API_BASE = "https://quinieaganadora.onrender.com/api";async function api(p,opts){return fetch(API_BASE+p,opts);}async function loadMatches(){const el=document.getElementById('matches');el.innerHTML='<li>Cargando partidos…</li>';try{const r=await api('/matches');if(!r.ok)throw new Error('status '+r.status);const d=await r.json();if(!d||d.length===0){el.innerHTML='<li>Sin partidos</li>';return;}el.innerHTML=d.map(m=>`<li><strong>${new Date(m.date||Date.now()).toLocaleString()}</strong> — ${m.home||'Home'} vs ${m.away||'Away'}</li>`).join('');}catch(e){el.innerHTML='<li>Error fetching matches: '+e.message+'</li>';console.error(e);}}function localGenerate(matches){const picks=[];for(const m of matches){const h=Number(m.home_rating||0),a=Number(m.away_rating||0);let ph=0.5;if(h||a){ph=0.5+Math.tanh((h-a)/10)/2;}else{ph=0.45+Math.random()*0.4;}ph=Math.max(0.05,Math.min(0.95,ph));picks.push({home:m.home||'Home',away:m.away||'Away',probability:Math.round(Math.max(ph,1-ph)*100),winner:ph>=0.5?m.home:m.away});}return picks;}async function generateP(){const p=document.getElementById('picks');p.innerText='Generando picks...';try{const r=await api('/generate-picks');if(r.status===404){p.innerText='Endpoint /generate-picks no encontrado. Usando fallback.';const mr=await api('/matches');if(!mr.ok)throw new Error('no matches');const matches=await mr.json();p.innerText=JSON.stringify(localGenerate(matches),null,2);return;}if(!r.ok)throw new Error('status '+r.status);p.innerText=JSON.stringify(await r.json(),null,2);}catch(e){console.warn(e);try{const mr=await api('/matches');if(!mr.ok)throw e;const matches=await mr.json();p.innerText='Fallback local:\n'+JSON.stringify(localGenerate(matches),null,2);}catch(er){p.innerText='Error generando picks: '+e+' fallback: '+er;}}}document.getElementById('refresh').addEventListener('click',loadMatches);document.getElementById('gen').addEventListener('click',generateP);window.addEventListener('load',loadMatches);</script></body></html>